{"remainingRequest":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\Projects\\vue-library-master\\1-Project\\frontend\\src\\modules\\auth\\guards\\auth-guard-mixin.js","dependencies":[{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\src\\modules\\auth\\guards\\auth-guard-mixin.js","mtime":1641838496703},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\babel.config.js","mtime":1641838494433},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641838763341},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1641838769328},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1641838766164}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\Projects\\\\vue-library-master\\\\1-Project\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { storeAsync } from '@/app-module';\nexport default {\n  beforeRouteEnter: function () {\n    var _beforeRouteEnter = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(to, from, next) {\n      var store;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(!to.meta || !to.meta.auth)) {\n                _context.next = 3;\n                break;\n              }\n\n              next();\n              return _context.abrupt(\"return\");\n\n            case 3:\n              store = storeAsync();\n              _context.next = 6;\n              return store.dispatch('auth/doWaitUntilInit');\n\n            case 6:\n              if (store.getters['auth/signedIn']) {\n                _context.next = 9;\n                break;\n              }\n\n              next({\n                path: '/auth/signin'\n              });\n              return _context.abrupt(\"return\");\n\n            case 9:\n              if (!(to.path !== '/auth/email-unverified' && !store.getters['auth/currentUser'].emailVerified)) {\n                _context.next = 12;\n                break;\n              }\n\n              next({\n                path: '/auth/email-unverified'\n              });\n              return _context.abrupt(\"return\");\n\n            case 12:\n              if (!(to.path !== '/auth/empty-permissions' && store.getters['auth/currentUser'].emailVerified && !store.getters['auth/roles'].length)) {\n                _context.next = 15;\n                break;\n              }\n\n              next({\n                path: '/auth/empty-permissions'\n              });\n              return _context.abrupt(\"return\");\n\n            case 15:\n              next();\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function beforeRouteEnter(_x, _x2, _x3) {\n      return _beforeRouteEnter.apply(this, arguments);\n    }\n\n    return beforeRouteEnter;\n  }()\n};",{"version":3,"sources":["E:/Projects/vue-library-master/1-Project/frontend/src/modules/auth/guards/auth-guard-mixin.js"],"names":["storeAsync","beforeRouteEnter","to","from","next","meta","auth","store","dispatch","getters","path","emailVerified","length"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,cAA3B;AAEA,eAAe;AACPC,EAAAA,gBADO;AAAA,qGACUC,EADV,EACcC,IADd,EACoBC,IADpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEP,CAACF,EAAE,CAACG,IAAJ,IAAY,CAACH,EAAE,CAACG,IAAH,CAAQC,IAFd;AAAA;AAAA;AAAA;;AAGTF,cAAAA,IAAI;AAHK;;AAAA;AAOLG,cAAAA,KAPK,GAOGP,UAAU,EAPb;AAAA;AAAA,qBASLO,KAAK,CAACC,QAAN,CAAe,sBAAf,CATK;;AAAA;AAAA,kBAWND,KAAK,CAACE,OAAN,CAAc,eAAd,CAXM;AAAA;AAAA;AAAA;;AAYTL,cAAAA,IAAI,CAAC;AAAEM,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAJ;AAZS;;AAAA;AAAA,oBAiBTR,EAAE,CAACQ,IAAH,KAAY,wBAAZ,IACA,CAACH,KAAK,CAACE,OAAN,CAAc,kBAAd,EAAkCE,aAlB1B;AAAA;AAAA;AAAA;;AAoBTP,cAAAA,IAAI,CAAC;AAAEM,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAJ;AApBS;;AAAA;AAAA,oBAyBTR,EAAE,CAACQ,IAAH,KAAY,yBAAZ,IACAH,KAAK,CAACE,OAAN,CAAc,kBAAd,EAAkCE,aADlC,IAEA,CAACJ,KAAK,CAACE,OAAN,CAAc,YAAd,EAA4BG,MA3BpB;AAAA;AAAA;AAAA;;AA6BTR,cAAAA,IAAI,CAAC;AAAEM,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAJ;AA7BS;;AAAA;AAiCXN,cAAAA,IAAI;;AAjCO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAf","sourcesContent":["import { storeAsync } from '@/app-module';\n\nexport default {\n  async beforeRouteEnter(to, from, next) {\n    if (!to.meta || !to.meta.auth) {\n      next();\n      return;\n    }\n\n    const store = storeAsync();\n\n    await store.dispatch('auth/doWaitUntilInit');\n\n    if (!store.getters['auth/signedIn']) {\n      next({ path: '/auth/signin' });\n      return;\n    }\n\n    if (\n      to.path !== '/auth/email-unverified' &&\n      !store.getters['auth/currentUser'].emailVerified\n    ) {\n      next({ path: '/auth/email-unverified' });\n      return;\n    }\n\n    if (\n      to.path !== '/auth/empty-permissions' &&\n      store.getters['auth/currentUser'].emailVerified &&\n      !store.getters['auth/roles'].length\n    ) {\n      next({ path: '/auth/empty-permissions' });\n      return;\n    }\n\n    next();\n  },\n};\n"]}]}