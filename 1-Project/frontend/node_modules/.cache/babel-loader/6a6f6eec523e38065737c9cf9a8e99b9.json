{"remainingRequest":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\Projects\\vue-library-master\\1-Project\\frontend\\src\\modules\\auth\\guards\\permission-guard-mixin.js","dependencies":[{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\src\\modules\\auth\\guards\\permission-guard-mixin.js","mtime":1641838496761},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\babel.config.js","mtime":1641838494433},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641838763341},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1641838769328},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1641838766164}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.match\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\Projects\\\\vue-library-master\\\\1-Project\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { storeAsync } from '@/app-module';\nimport PermissionChecker from '@/modules/iam/permission-checker';\nexport default {\n  beforeRouteEnter: function () {\n    var _beforeRouteEnter = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(to, from, next) {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(!to.meta || !to.meta.permission)) {\n                _context.next = 3;\n                break;\n              }\n\n              next();\n              return _context.abrupt(\"return\");\n\n            case 3:\n              _context.next = 5;\n              return storeAsync().dispatch('auth/doWaitUntilInit');\n\n            case 5:\n              if (new PermissionChecker(storeAsync().getters['auth/currentUser']).match(to.meta.permission)) {\n                next();\n              } else {\n                next('/403');\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function beforeRouteEnter(_x, _x2, _x3) {\n      return _beforeRouteEnter.apply(this, arguments);\n    }\n\n    return beforeRouteEnter;\n  }()\n};",{"version":3,"sources":["E:/Projects/vue-library-master/1-Project/frontend/src/modules/auth/guards/permission-guard-mixin.js"],"names":["storeAsync","PermissionChecker","beforeRouteEnter","to","from","next","meta","permission","dispatch","getters","match"],"mappings":";;;AAAA,SAASA,UAAT,QAA2B,cAA3B;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AAEA,eAAe;AACPC,EAAAA,gBADO;AAAA,qGACUC,EADV,EACcC,IADd,EACoBC,IADpB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEP,CAACF,EAAE,CAACG,IAAJ,IAAY,CAACH,EAAE,CAACG,IAAH,CAAQC,UAFd;AAAA;AAAA;AAAA;;AAGTF,cAAAA,IAAI;AAHK;;AAAA;AAAA;AAAA,qBAOLL,UAAU,GAAGQ,QAAb,CAAsB,sBAAtB,CAPK;;AAAA;AASX,kBACE,IAAIP,iBAAJ,CACED,UAAU,GAAGS,OAAb,CAAqB,kBAArB,CADF,EAEEC,KAFF,CAEQP,EAAE,CAACG,IAAH,CAAQC,UAFhB,CADF,EAIE;AACAF,gBAAAA,IAAI;AACL,eAND,MAMO;AACLA,gBAAAA,IAAI,CAAC,MAAD,CAAJ;AACD;;AAjBU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAf","sourcesContent":["import { storeAsync } from '@/app-module';\nimport PermissionChecker from '@/modules/iam/permission-checker';\n\nexport default {\n  async beforeRouteEnter(to, from, next) {\n    if (!to.meta || !to.meta.permission) {\n      next();\n      return;\n    }\n\n    await storeAsync().dispatch('auth/doWaitUntilInit');\n\n    if (\n      new PermissionChecker(\n        storeAsync().getters['auth/currentUser'],\n      ).match(to.meta.permission)\n    ) {\n      next();\n    } else {\n      next('/403');\n    }\n  },\n};\n"]}]}