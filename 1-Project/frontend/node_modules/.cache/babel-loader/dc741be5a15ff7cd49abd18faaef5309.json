{"remainingRequest":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\Projects\\vue-library-master\\1-Project\\frontend\\src\\shared\\axios\\auth-axios.js","dependencies":[{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\src\\shared\\axios\\auth-axios.js","mtime":1641838498735},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\babel.config.js","mtime":1641838494433},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641838763341},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1641838769328},{"path":"E:\\Projects\\vue-library-master\\1-Project\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1641838766164}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\Projects\\\\vue-library-master\\\\1-Project\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { AuthToken } from '@/modules/auth/auth-token';\nimport Axios from 'axios';\nimport Qs from 'qs';\nimport * as moment from 'moment';\nimport config from '@/config';\nimport { getLanguageCode } from '@/i18n';\nvar authAxios = Axios.create({\n  baseURL: config.backendUrl,\n  paramsSerializer: function paramsSerializer(params) {\n    return Qs.stringify(params, {\n      arrayFormat: 'brackets',\n      filter: function filter(prefix, value) {\n        if (value instanceof moment || value instanceof Date) {\n          return value.toISOString();\n        }\n\n        return value;\n      }\n    });\n  }\n});\nauthAxios.interceptors.request.use( /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(options) {\n    var token;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return AuthToken.get();\n\n          case 2:\n            token = _context.sent;\n\n            if (token) {\n              options.headers['Authorization'] = \"Bearer \".concat(token);\n            }\n\n            options.headers['Accept-Language'] = getLanguageCode();\n            return _context.abrupt(\"return\", options);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}(), function (error) {\n  console.log('Request error: ', error);\n  return Promise.reject(error);\n});\nexport default authAxios;",{"version":3,"sources":["E:/Projects/vue-library-master/1-Project/frontend/src/shared/axios/auth-axios.js"],"names":["AuthToken","Axios","Qs","moment","config","getLanguageCode","authAxios","create","baseURL","backendUrl","paramsSerializer","params","stringify","arrayFormat","filter","prefix","value","Date","toISOString","interceptors","request","use","options","get","token","headers","error","console","log","Promise","reject"],"mappings":";;AAAA,SAASA,SAAT,QAA0B,2BAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAO,KAAKC,MAAZ,MAAwB,QAAxB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,eAAT,QAAgC,QAAhC;AAEA,IAAMC,SAAS,GAAGL,KAAK,CAACM,MAAN,CAAa;AAC7BC,EAAAA,OAAO,EAAEJ,MAAM,CAACK,UADa;AAE7BC,EAAAA,gBAAgB,EAAE,0BAASC,MAAT,EAAiB;AACjC,WAAOT,EAAE,CAACU,SAAH,CAAaD,MAAb,EAAqB;AAC1BE,MAAAA,WAAW,EAAE,UADa;AAE1BC,MAAAA,MAAM,EAAE,gBAACC,MAAD,EAASC,KAAT,EAAmB;AACzB,YACEA,KAAK,YAAYb,MAAjB,IACAa,KAAK,YAAYC,IAFnB,EAGE;AACA,iBAAOD,KAAK,CAACE,WAAN,EAAP;AACD;;AAED,eAAOF,KAAP;AACD;AAXyB,KAArB,CAAP;AAaD;AAhB4B,CAAb,CAAlB;AAmBAV,SAAS,CAACa,YAAV,CAAuBC,OAAvB,CAA+BC,GAA/B;AAAA,qEACE,iBAAeC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACsBtB,SAAS,CAACuB,GAAV,EADtB;;AAAA;AACQC,YAAAA,KADR;;AAGE,gBAAIA,KAAJ,EAAW;AACTF,cAAAA,OAAO,CAACG,OAAR,CAAgB,eAAhB,qBAA6CD,KAA7C;AACD;;AAEDF,YAAAA,OAAO,CAACG,OAAR,CAAgB,iBAAhB,IAAqCpB,eAAe,EAApD;AAPF,6CASSiB,OATT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GADF;;AAAA;AAAA;AAAA;AAAA,KAYE,UAASI,KAAT,EAAgB;AACdC,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,KAA/B;AACA,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAfH;AAkBA,eAAepB,SAAf","sourcesContent":["import { AuthToken } from '@/modules/auth/auth-token';\nimport Axios from 'axios';\nimport Qs from 'qs';\nimport * as moment from 'moment';\nimport config from '@/config';\nimport { getLanguageCode } from '@/i18n';\n\nconst authAxios = Axios.create({\n  baseURL: config.backendUrl,\n  paramsSerializer: function(params) {\n    return Qs.stringify(params, {\n      arrayFormat: 'brackets',\n      filter: (prefix, value) => {\n        if (\n          value instanceof moment ||\n          value instanceof Date\n        ) {\n          return value.toISOString();\n        }\n\n        return value;\n      },\n    });\n  },\n});\n\nauthAxios.interceptors.request.use(\n  async function(options) {\n    const token = await AuthToken.get();\n\n    if (token) {\n      options.headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    options.headers['Accept-Language'] = getLanguageCode();\n\n    return options;\n  },\n  function(error) {\n    console.log('Request error: ', error);\n    return Promise.reject(error);\n  },\n);\n\nexport default authAxios;\n"]}]}